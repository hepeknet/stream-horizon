<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<config>
	<properties>
		<property name="remoting.server.port">0</property>
	</properties>
	<connectionProperties>
		<jdbcUrl>jdbc:h2:mem:bauk_test;DB_CLOSE_DELAY=-1</jdbcUrl>
		<jdbcPoolSize>20</jdbcPoolSize>
	</connectionProperties>
	<feeds>
		<feed name="TEST_jdbc_Feed" type="full">
			<source type="file">
				<properties>
					<property name="directoryPath"></property>
					<property name="fileNameMask">.*bauk_test</property>
				</properties>
			</source>
			<target type="jdbc">
			</target>
			<archiveDirectory></archiveDirectory>
			<errorDirectory></errorDirectory>
			<bulkOutputDirectory></bulkOutputDirectory>
			<delimiterString>,</delimiterString>
			<header process="no_header" />
			<data process="no_validation">
				<eachLineStartsWithCharacter></eachLineStartsWithCharacter>
				<attributes>
					<attribute name="attr1" />
					<attribute name="attr2" />
					<attribute name="a_in" />
					<attribute name="b_in" />
					<attribute name="c_in" />
					<attribute name="d_in" />
				</attributes>
			</data>
			<footer process="skip" />
			<bulkLoadDefinition>
				<bulkLoadInsert>
					<command type="sql">insert into TEST_FACT(f1,f2,f3,f4) values(?,?,?,'${bulkFileName}')</command>
				</bulkLoadInsert>
				<bulkLoadFormatDefinition>
					<attributes>
						<attribute name="dimension.BIG_TEST_DIM" type="int" />
						<attribute name="feed.attr1" type="int" />
						<attribute name="feed.attr2" type="int" />
					</attributes>
				</bulkLoadFormatDefinition>
			</bulkLoadDefinition>
			<threadPoolSettings>
				<etlProcessingThreadCount>1</etlProcessingThreadCount>
				<databaseProcessingThreadCount>1</databaseProcessingThreadCount>
			</threadPoolSettings>
		</feed>
	</feeds>
	<dimensions>
		<dimension name="BIG_TEST_DIM" type="T1">
			<localCacheMaxSize>50000</localCacheMaxSize>
			<mappedColumns>
				<mappedColumn name="c_in" naturalKey="false" />
				<mappedColumn name="a_in" naturalKey="true" />
				<mappedColumn name="d_in" naturalKey="false" />
				<mappedColumn name="b_in" naturalKey="true" />
			</mappedColumns>
			<sqlStatements>
				<insertSingleRecord>
					insert into BIG_TEST_DIM(a,b,c,d, num_updates) values ('${a_in}','${b_in}', '${c_in}', '${d_in}', 0)
				</insertSingleRecord>
				<updateSingleRecord>update BIG_TEST_DIM set c='${c_in}', d='${d_in}', num_updates = num_updates + 1 where a='${a_in}' and b='${b_in}'</updateSingleRecord>
				<selectRecordIdentifier>select id from BIG_TEST_DIM where a='${a_in}' and b='${b_in}'</selectRecordIdentifier>
				<preCacheRecords>select id, a, b, c, d from BIG_TEST_DIM</preCacheRecords>
			</sqlStatements>
		</dimension>
	</dimensions>
</config>
